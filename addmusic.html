<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
</head>
<body>

    <input class="form-control" id="textyoutube" type="text" placeholder="Default input" aria-label="default input example">

    <button type="button" onclick="addnewvideo()" class="btn btn-primary">ขอเพลง</button>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        function ytVidId(url) {
            var p = /^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/;
            return (url.match(p)) ? RegExp.$1 : false;
        }



        function YouTubeGetID(url){
            var ID = '';
            url = url.replace(/(>|<)/gi,'').split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);
            if(url[2] !== undefined) {
                ID = url[2].split(/[^0-9a-z_\-]/i);
                ID = ID[0];
            }
            else {
                ID = url;
            }
            return ID;
        }

        function addnewvideo() {
            video_id = document.getElementById('textyoutube').value
            if (ytVidId(video_id) !== false) {
                alert('yes')
            } else {
                alert('no')
            }
            video_id = YouTubeGetID(video_id)
            //video_id = video_id.replace("https://youtu.be/", "");
            //video_id = video_id.replace("https://www.youtube.com/watch?v=", "");
            //video_id = video_id.replace("https:/youtube.com/watch?v=", "");

            console.log(video_id)

            $.post("amq.php",
            {
                ytid: video_id,
            },
            function(data,status){
                alert("Data: " + data + "\nStatus: " + status);
            });
        }
    </script>
</body>
</html>